"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FromRoot = void 0;
const Nestable_1 = require("../Nestable");
function FromRoot() {
    return function (target, propertyKey) {
        const getter = function () {
            const defaults = this[Nestable_1.kDefaultPropertyForFromRoot];
            const root = this.getRootNode();
            if (root === this) {
                return defaults[propertyKey];
            }
            const rootValue = root[propertyKey];
            if (rootValue) {
                return rootValue;
            }
            else {
                return defaults[propertyKey];
            }
        };
        const setter = function (_default) {
            const defaults = this[Nestable_1.kDefaultPropertyForFromRoot];
            defaults[propertyKey] = _default;
        };
        Object.defineProperty(target, propertyKey, {
            get: getter,
            set: setter
        });
    };
}
exports.FromRoot = FromRoot;
